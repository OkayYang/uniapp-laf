(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/personal"],{"40d7":function(e,t,u){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(u("6cac"));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(){u.e("components/thorui/tui-loading/tui-loading").then(function(){return resolve(u("889a"))}.bind(null,u)).catch(u.oe)},a={components:{tuiLoading:o},data:function(){return{load:{show:!0},uploadPath:"",baseUrl:n.default.getHost(),userInfo:{stuNick:"某某",stuName:"某某某",stuSex:"3",stuXh:"********",stuDepartment:"********",stuMajor:"********",stuClassname:"********",stuQq:"********",stuEmail:"********",stuImage:""},show:!1,title:"",change:"",mask:!1,isRequest:!1}},onLoad:function(){var t=this,u=this;e.getStorage({key:"userInfo",success:function(e){u.load.show=!1,t.userInfo=e.data}})},methods:{paneAlert:function(){this.$refs.uToast.show({type:"fail",message:"异常错误",duration:700})},open:function(e){this.show=!0,this.title=e},close:function(){this.show=!1},save:function(){var t=this;this.show=!1;var u=null,s=null,o=null;if(null!=this.change&&""!=this.change.replace(/\ +/g,"")){if("昵称"==this.title)u=this.change;else if("QQ"==this.title){s=this.change;var a=/^[1-9][0-9]{4,9}$/,i=a.test(s);if(0==i)return void this.$refs.uToast.show({type:"fail",message:"QQ号不合规！",duration:700})}else if("TEL"==this.title){o=this.change;var l=/^1[3-9][0-9]{9}$/,r=l.test(o);if(0==r)return void this.$refs.uToast.show({type:"fail",message:"手机号不合规！",duration:700})}}else"昵称"==this.title?u="":"QQ"==this.title?s="":"TEL"==this.title&&(o="");this.change=null,this.isRequest=!0,this.mask=!0,n.default.postRequest("/wx/api/student/auth/edit",{stuNick:u,stuQq:s,stuEmail:o},(function(a){0==a.data.code&&200==a.statusCode?(t.isRequest=!1,t.mask=!1,null!=u?t.userInfo.stuNick=u:null!=s?t.userInfo.stuQq=s:null!=o&&(t.userInfo.stuEmail=o),e.showToast({title:"修改成功!",duration:1e3}),n.default.getRequest("/wx/api/student/auth/my",{},(function(u){console.log(u),e.setStorage({key:"userInfo",data:u.data}),t.$store.state.storeFresh=!0}))):406==a.data.code?(t.isRequest=!1,t.mask=!1,t.$refs.uToast.show({type:"fail",message:"内容包含敏感信息",duration:700})):(t.isRequest=!1,t.mask=!1,t.$refs.uToast.show({type:"fail",message:"修改失败",duration:700}))}),(function(e){t.isRequest=!1,t.mask=!1,t.paneAlert()}))},changeImage:function(){var t=this,u=null;e.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(s){var o=this;t.isRequest=!0,t.mask=!0,t.uploadPath=s.tempFilePaths[0],e.uploadFile({url:t.baseUrl+"/wx/api/info/upload",filePath:t.uploadPath,name:"file",success:function(s){s=JSON.parse(s.data),0==s.code&&(u=t.baseUrl+s.msg,n.default.postRequest("/wx/api/student/auth/edit",{stuImage:t.baseUrl+s.msg},(function(s){0==s.data.code&&200==s.statusCode?(t.isRequest=!1,t.mask=!1,t.userInfo.stuImage=u,e.showToast({title:"修改成功!",duration:1e3}),n.default.getRequest("/wx/api/student/auth/my",{},(function(t){e.setStorage({key:"userInfo",data:t.data})}))):406==s.data.code?(o.isRequest=!1,o.mask=!1,o.$refs.uToast.show({type:"fail",message:"图片包含敏感信息",duration:700})):(o.isRequest=!1,o.mask=!1,o.$refs.uToast.show({type:"fail",message:"修改失败",duration:700}))}),(function(e){o.isRequest=!1,o.mask=!1,o.paneAlert()})))}})}})}}};t.default=a}).call(this,u("543d")["default"])},"83b7":function(e,t,u){"use strict";u.d(t,"b",(function(){return s})),u.d(t,"c",(function(){return o})),u.d(t,"a",(function(){return n}));var n={uPopup:function(){return Promise.all([u.e("common/vendor"),u.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(u.bind(null,"d857"))},uCellGroup:function(){return Promise.all([u.e("common/vendor"),u.e("uni_modules/uview-ui/components/u-cell-group/u-cell-group")]).then(u.bind(null,"490c"))},uCell:function(){return Promise.all([u.e("common/vendor"),u.e("uni_modules/uview-ui/components/u-cell/u-cell")]).then(u.bind(null,"9cb8"))},uToast:function(){return u.e("uni_modules/uview-ui/components/u-toast/u-toast").then(u.bind(null,"c41c"))},tuiLoading:function(){return u.e("node-modules/thorui-uni/lib/thorui/tui-loading/tui-loading").then(u.bind(null,"0db2"))},uOverlay:function(){return Promise.all([u.e("common/vendor"),u.e("uni_modules/uview-ui/components/u-overlay/u-overlay")]).then(u.bind(null,"f24c"))},uLoadingPage:function(){return Promise.all([u.e("common/vendor"),u.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(u.bind(null,"b8e0"))}},s=function(){var e=this,t=e.$createElement;e._self._c},o=[]},"915d":function(e,t,u){"use strict";u.r(t);var n=u("83b7"),s=u("b421");for(var o in s)"default"!==o&&function(e){u.d(t,e,(function(){return s[e]}))}(o);u("a588");var a,i=u("f0c5"),l=Object(i["a"])(s["default"],n["b"],n["c"],!1,null,"0190f6f8",null,!1,n["a"],a);t["default"]=l.exports},a588:function(e,t,u){"use strict";var n=u("ddbc"),s=u.n(n);s.a},b421:function(e,t,u){"use strict";u.r(t);var n=u("40d7"),s=u.n(n);for(var o in n)"default"!==o&&function(e){u.d(t,e,(function(){return n[e]}))}(o);t["default"]=s.a},ddbc:function(e,t,u){},e8c4:function(e,t,u){"use strict";(function(e){u("c83d");n(u("66fd"));var t=n(u("915d"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=u,e(t.default)}).call(this,u("543d")["createPage"])}},[["e8c4","common/runtime","common/vendor"]]]);