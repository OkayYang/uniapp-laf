(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/form/form"],{3193:function(e,n,t){},3781:function(e,n,t){"use strict";t.r(n);var o=t("ac64"),u=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=u.a},"83e8":function(e,n,t){"use strict";var o=t("3193"),u=t.n(o);u.a},ac64:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("a34a")),u=r(t("6cac"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n,t,o,u,r,a){try{var i=e[r](a),s=i.value}catch(c){return void t(c)}i.done?n(s):Promise.resolve(s).then(o,u)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(o,u){var r=e.apply(n,t);function a(e){s(r,o,u,a,i,"next",e)}function i(e){s(r,o,u,a,i,"throw",e)}a(void 0)}))}}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var m={data:function(){var e;return e={rel_status:null,navbar:null,showCampus:!1,model1:{userInfo:{name:"",campus:""}},showSort:!1},l(e,"model1",{userInfo:{name:"",sort:"",value:""}}),l(e,"actions",[{name:"南昌校区"},{name:"红旗校区"},{name:"黄金校区"}]),l(e,"sortActions",[{name:"学生证"},{name:"身份证"},{name:"其他"}]),l(e,"submitBtnStyle",{width:"100%",margin:"auto",borderRadius:" 10rpx 10rpx"}),l(e,"rules",{"userInfo.sort":{type:"string",max:1,required:!0,message:"请选择失物类别",trigger:["blur","change"]},"userInfo.campus":{type:"string",max:1,required:!0,message:"请选择校区",trigger:["blur","change"]},"userInfo.title":{type:"string",required:!0,message:"请填写失物",trigger:["blur","change"]},"userInfo.contact":{type:"string",required:!0,message:"请填写联系方式",trigger:["blur","change"]}}),l(e,"radio",""),l(e,"switchVal",!1),l(e,"value3",""),l(e,"photoUrl",""),l(e,"fileList1",[]),l(e,"name",""),l(e,"type",""),l(e,"campusText",""),l(e,"id",""),e},onLoad:function(e){this.onLoadClone3389(e)},methods:{onLoadClone3389:function(n){var t=this;u.default.getRequest("/wx/api/category/treeData",null,(function(e){var n=[];e.data.forEach((function(e){n.push({name:e.name,value:e.id})})),t.sortActions=n}));var o=n.type;1==o?(this.navbar="发布一条失物招领",this.rel_status=o):2==o?(this.navbar="发布一条寻物启事",this.rel_status=o):e.showToast({title:"非法访问!",icon:"error",duration:1e3,success:function(){e.switchTab({url:"../index/index"})}})},campusSelect:function(e){this.model1.userInfo.campus=e.name},sortSelect:function(e){this.model1.userInfo.sort=e.name,this.model1.userInfo.value=e.value,console.log(e.name),console.log(e.value)},deletePic:function(e){this["fileList".concat(e.name)].splice(e.index,1)},afterRead:function(e){var n=this;return c(o.default.mark((function t(){var u,r,a,s,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:u=[].concat(e.file),r=n["fileList".concat(e.name)].length,u.map((function(t){n["fileList".concat(e.name)].push(i(i({},t),{},{status:"uploading",message:"上传中"}))})),a=0;case 4:if(!(a<u.length)){t.next=14;break}return t.next=7,n.uploadFilePromise(u[a].url);case 7:s=t.sent,c=n["fileList".concat(e.name)][r],n["fileList".concat(e.name)].splice(r,1,Object.assign(c,{status:"success",message:"",url:s})),r++;case 11:a++,t.next=4;break;case 14:case"end":return t.stop()}}),t)})))()},uploadFilePromise:function(n){var t=this;return new Promise((function(o,u){var r=t;e.uploadFile({url:"http://101.42.222.167/wx/api/release/upload",filePath:n,name:"file",formData:{user:"test"},success:function(e){setTimeout((function(){o(e.data.data)}),1e3),console.log(e);var n=e.data;if(r.name=JSON.parse(n).name,r.type=JSON.parse(n).type,r.number=JSON.parse(n).number,r.photoUrl=JSON.parse(n).photoUrl,console.log(r.type),"sfz"==r.type){var u=r.number.replace(/^(.{4})(?:\d+)(.{4})$/,"$1******$2");r.model1.userInfo.title="捡到"+t.name+"的身份证",r.value3="身份证号为"+u,r.model1.userInfo.sort="身份证",r.model1.userInfo.value=2,console.log("捡到身份证")}else if("xsz"==r.type){u=r.number.replace(/^(.{2})(?:\d+)(.{2})$/,"$1******$2");r.model1.userInfo.title="捡到"+t.name+"的学生证",r.value3="学生证号为"+u,r.model1.userInfo.sort="学生证",r.model1.userInfo.value=3}console.log(r.type)}})}))},postForm:function(){u.default.postRequest("/wx/api/release/auth/add/check",{relCampus:this.model1.userInfo.campus,relCateId:this.model1.userInfo.value,relContact:this.model1.userInfo.contact,relDesc:this.value3,relImage:this.photoUrl,relStatus:this.rel_status,relTitle:this.model1.userInfo.title,createPlace:this.model1.userInfo.clue})}}};n.default=m}).call(this,t("543d")["default"])},e990:function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}));var o={uNoticeBar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-notice-bar/u-notice-bar")]).then(t.bind(null,"b1d3"))},uUpload:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-upload/u-upload")]).then(t.bind(null,"f887"))},"u-Form":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--form/u--form")]).then(t.bind(null,"8032"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"7ca2"))},"u-Input":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--input/u--input")]).then(t.bind(null,"5be4"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"1ad2"))},uActionSheet:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-action-sheet/u-action-sheet")]).then(t.bind(null,"d878"))},"u-Textarea":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--textarea/u--textarea")]).then(t.bind(null,"66d0"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"8a2f"))}},u=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.showSort=!0},e.e1=function(n){e.showSort=!1},e.e2=function(n){e.showCampus=!0},e.e3=function(n){e.showCampus=!1})},r=[]},ecc4:function(e,n,t){"use strict";t.r(n);var o=t("e990"),u=t("3781");for(var r in u)"default"!==r&&function(e){t.d(n,e,(function(){return u[e]}))}(r);t("83e8");var a,i=t("f0c5"),s=Object(i["a"])(u["default"],o["b"],o["c"],!1,null,"dcbd609a",null,!1,o["a"],a);n["default"]=s.exports},fa0d:function(e,n,t){"use strict";(function(e){t("c83d");o(t("66fd"));var n=o(t("ecc4"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])}},[["fa0d","common/runtime","common/vendor"]]]);